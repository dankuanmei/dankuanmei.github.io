
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ダン・クァン・ミン Blog</title>
  <meta name="author" content="ダン・クァン・ミン">

  
  <meta name="description" content=".vimrc set number
set ruler
set showmatch
set hlsearch "--- tab ----
set tabstop=4
set shiftwidth=4 "--- indent ----
" 'autoindent' depends on a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dankuanmei.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ダン・クァン・ミン Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Roboto+Condensed&subset=latin,vietnamese' rel='stylesheet' type='text/css'>
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">ダン・クァン・ミン Blog</a></h1>
  
    <h2>はじめまして</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS" target="_blank"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="sitesearch" value="dankuanmei.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/01/vim-config/">Vim Config</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-09-01T09:18:07+09:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>9:18 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>.vimrc</h3>

<pre><code>set number
set ruler
set showmatch
set hlsearch

"--- tab ----
set tabstop=4
set shiftwidth=4

"--- indent ----
" 'autoindent' depends on a above line.
"set autoindent

" 'smartndent' analies several lines.
set smartindent

" 'cndent' is greatest for C-launguage.
"set cindent

"--- status ---
set laststatus=2

"--- ctags ---
set tags=.tags

"--- list ----
set list
set listchars=tab:&gt;-

"--- decoration ----
highlight SpecialKey ctermfg=grey
highlight ZenkakuSpace cterm=underline ctermfg=darkgrey

"--- xml sort ---
command XmlSort %s/&gt;&lt;/&gt;\r&lt;/g | setf xml | normal gg=G

"--- open binary ----
augroup BinaryXXD
    autocmd!
    autocmd BufReadPre  *.bin let &amp;binary =1
    autocmd BufReadPost * if &amp;binary | silent %!xxd -g 1
    autocmd BufReadPost * set ft=xxd | endif
    autocmd BufWritePre * if &amp;binary | %!xxd -r | endif
    autocmd BufWritePost * if &amp;binary | silent %!xxd -g 1
    autocmd BufWritePost * set nomod | endif
augroup END
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/16/setup-apache/">Setup Apache, Mysql and Rails</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-16T22:54:58+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:54 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Install apache2</p>

<pre><code>$ sudo yum install httpd
$ sudo service httpd start
</code></pre>

<p>Install mysql</p>

<pre><code>$ sudo yum install mysql-server
$ sudo service mysqld start
$ mysql_secure_installation

$ sudo yum install mlocate tree sysstat iftop dstat lsof tcpdump wget
$ sudo yum install libcurl-devel httpd-devel apr-devel apr-util-devel
$ sudo yum install mysql-devel
</code></pre>

<p>Set up rails</p>

<pre><code>$ sudo gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3
$ curl -sSL https://get.rvm.io | bash
$ source ~/.profile
$ rvm install 2.2.2
$ rvm use 2.2.2 --default
$ gem install rails
</code></pre>

<p>Edit file <code>/etc/httpd/conf/httpd.conf</code></p>

<pre><code>LoadModule passenger_module /home/kankou/.rvm/gems/ruby-2.2.2/gems/passenger-5.0.15/buildout/apache2/mod_passenger.so
&lt;IfModule mod_passenger.c&gt;
  PassengerRoot /home/kankou/.rvm/gems/ruby-2.2.2/gems/passenger-5.0.15
  PassengerDefaultRuby /home/kankou/.rvm/gems/ruby-2.2.2/wrappers/ruby
&lt;/IfModule&gt;

&lt;VirtualHost *:80&gt;
    ServerName kankouannai-apuri.local
    DocumentRoot /home/kankou/Kankouannai/public/
        RailsEnv development
        RailsBaseURI /
    &lt;Directory /home/kankou/Kankouannai/public/&gt;
        AllowOverride all
        Options -MultiViews
    &lt;/Directory&gt;
&lt;/VirtualHost&gt;
</code></pre>

<p>Install passenger</p>

<pre><code>$ gem install passenger
$ passenger-install-apache2-module
</code></pre>

<p>Install vsftpd</p>

<pre><code>$ sudo yum install vsftpd
</code></pre>

<p>Install nodejs</p>

<pre><code>$ curl -sL https://rpm.nodesource.com/setup | sudo bash -
$ sudo yum install nodejs
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/15/vagrant-step-by-step/">Vagrant Step by Step</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-15T18:24:08+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:24 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Download VirtualBox for Linux Hosts</h3>

<p>Add the following line to your /etc/apt/sources.list:</p>

<pre><code>deb http://download.virtualbox.org/virtualbox/debian trusty contrib
</code></pre>

<p>Run command:</p>

<pre><code>$ wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -
$ sudo apt-get update
$ sudo apt-get install virtualbox-5.0
$ sudo apt-get install dkms
</code></pre>

<h3>Install Vagrant( on HostMachine )</h3>

<p>Please download vagrant from <code>http://www.vagrantup.com/downloads.html</code>.</p>

<p>Then run command:</p>

<pre><code>$ vagrant box add centos6_5 https://github.com/2creatives/vagrant-centos/releases/download/v6.5.3/centos65-x86_64-20140116.box
</code></pre>

<p>Setup Vagrant( on HostMachine )</p>

<pre><code>$ vagrant init centos6_5
</code></pre>

<p>Please set ip address into Vagrantfile.</p>

<pre><code>Vagrant::Config.run do |config|
  config.vm.box = "centos6_5" 
  config.vm.network "public_network", ip:"192.168.1.156" 
  ...
</code></pre>

<p>Install sahara( on HostMachine )</p>

<p>Sahara can shot a snap for OS-image. You can commit your operations and rollback your operations.</p>

<pre><code>$ vagrant plugin install sahara
$ vagrant plugin install vagrant-vbguest
$ vagrant plugin install vagrant-omnibus
$ vagrant plugin install vagrant-berkshelf
$ vagrant plugin install vagrant-chef-zero
</code></pre>

<p>if you have an error, please install c++ compiler( debian:g++, redhat:gcc-c++ )</p>

<p>Wake up GuestMachine:</p>

<pre><code>$ vagrant up
$ vagrant ssh
</code></pre>

<p>change super user:</p>

<pre><code>$ su -
</code></pre>

<p>Default password of root user is <code>vagrant</code>.</p>

<p>Create user:</p>

<pre><code>$ useradd chefsfarms
$ passwd chefsfarms
Changing password for user chefsfarms.
New password: chefsfarms
Retype new password: chefsfarms
passwd: all authentication tokens updated successfully.
</code></pre>

<p>Add a user in super users:</p>

<pre><code>$ visudo
</code></pre>

<p>Then please add below.</p>

<pre><code>chefsfarms      ALL=(ALL)       NOPASSWD:ALL
</code></pre>

<p>Change mode home directory of the guest user:</p>

<pre><code>$ chmod 755 /home/chefsfarms
</code></pre>

<h3>Install Chef-Solo( on GuestMachine )</h3>

<pre><code>$ curl -L http://www.opscode.com/chef/install.sh | sudo bash
</code></pre>

<p>Go to <code>https://downloads.chef.io/chef-dk/redhat/#/</code>. Get link download.</p>

<pre><code>$ wget https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chefdk-0.6.2-1.el6.x86_64.rpm

$ sudo rpm -Uvh chefdk-0.6.2-1.el6.x86_64.rpm

$ which chef

$ chef -v
</code></pre>

<p>Then run:</p>

<pre><code>$ chef generate repo chef-repo
$ cd chef-repo

$ vi Berksfile
</code></pre>

<p>Chèn source code sau vào.</p>

<pre><code>source "https://supermarket.chef.io"

cookbook 'application_ruby'
cookbook 'apt'
cookbook 'build-essential'
cookbook 'user'
cookbook 'ssh_known_hosts'
cookbook 'ruby_build'
cookbook 'vim'
</code></pre>

<p>Chạy command:</p>

<pre><code>$ berks vendor cookbooks
</code></pre>

<p>Thế là đã cài đặt xong. And now, all the needed cookbooks are downloaded into folder chef-repo/cookbooks</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/13/rails-websocket-deploy-on-apache2-with-passenger/">Rails Websocket Deploy on Apache2 With Passenger</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-13T11:26:37+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>13</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>11:26 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Đầu tiên là tạo dự án rails đã.</p>

<pre><code>$ rails new sample-chat -d mysql
</code></pre>

<p>Sau đó config database trong file <code>config/database.yml</code></p>

<p>Bước tiếp theo đó là cài đặt gem <code>websocket-rails</code>trong <code>Gemfile</code></p>

<pre><code>gem "websocket-rails"
</code></pre>

<p>Chạy lệnh <code>bundle install</code></p>

<p>Chạy lệnh <code>rails g websocket_rails:install</code></p>

<p>WebsocketRailsコントローラの作成. Tạo file <code>app/controllers/websocket_chat_controller.rb</code></p>

<pre><code># WebsocketRails::BaseControllerを継承
class WebsocketChatController &lt; WebsocketRails::BaseController
  def message_recieve
    # クライアントからのメッセージを取得
    recieve_message = message()
    # websocket_chatイベントで接続しているクライアントにブロードキャスト
    broadcast_message(:websocket_chat, recieve_message)
  end
end
</code></pre>

<p>Event Routerの設定. Sửa file <code>events.rb</code> trong thư mục config</p>

<pre><code>WebsocketRails::EventMap.describe do
  subscribe :websocket_chat, to: WebsocketChatController, with_method: :message_recieve
end
</code></pre>

<p>Tạo controller Chat đơn giản</p>

<pre><code>$ rails g controller Chat index
</code></pre>

<p>Trong file <code>index.html.erb</code> chèn source code này vào</p>

<pre><code>&lt;!-- チャット表示部分 --&gt;
&lt;ul id="chat_area"&gt;&lt;/ul&gt;

&lt;!-- コメントフォーム --&gt;
&lt;input id="comment" type="text"&gt;
&lt;input id="send" type="button" value="send"&gt;

&lt;script&gt;
  var ws_rails = new WebSocketRails("sample-chat.local:3001/websocket");
  // メッセージ受信時の処理
  ws_rails.bind("websocket_chat", function(message){
    var message_li = document.createElement("li");
    message_li.textContent = message;
    document.getElementById("chat_area").appendChild(message_li);
  });

  // メッセージ送信時の処理
  document.getElementById("send").onclick =  function(){
    var comment = document.getElementById("comment").value;
    ws_rails.trigger("websocket_chat", comment);
  }
&lt;/script&gt;
</code></pre>

<p>Rack::Lockの無効化. Trong file <code>config/environments/development.rb</code>, viết thêm dòng config này vào:</p>

<pre><code>config.middleware.delete Rack::Lock
</code></pre>

<p>Vậy là đã xong phần source code, giờ thì sẽ triển khai deploy trên Apache2, với Passenger &amp; Virtualhost.</p>

<p>Trong Gemfile điền thêm hai gem:</p>

<pre><code># Deploy
gem 'passenger'
gem 'therubyracer', platforms: :ruby
</code></pre>

<p>Bundle install xong thì chạy lệnh <code>passenger-install-apache2-module</code>. Thiết lập Passenger cho thằng Apache2.</p>

<p>Thiết lập thêm theo cách này cho chắc ăn. Nhưng hình như sẽ bị cảnh báo là confict. Hiện thời chưa thấy confilct gì cả.</p>

<p>First, install the PGP key for the repository server:</p>

<pre><code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 561F9B9CAC40B2F7
</code></pre>

<p>Create an APT source file:</p>

<pre><code>sudo nano /etc/apt/sources.list.d/passenger.list
</code></pre>

<p>Insert the following line to add the Passenger repository to the file:</p>

<pre><code>deb https://oss-binaries.phusionpassenger.com/apt/passenger trusty main
</code></pre>

<p>Press CTRL+X to exit, type Y to save the file, and then press ENTER to confirm the file location.</p>

<p>Change the owner and permissions for this file to restrict access to root:</p>

<pre><code>sudo chown root: /etc/apt/sources.list.d/passenger.list
sudo chmod 600 /etc/apt/sources.list.d/passenger.list
</code></pre>

<p>Update the APT cache:</p>

<pre><code>sudo apt-get update
</code></pre>

<p>Finally, install Passenger:</p>

<pre><code>sudo apt-get install libapache2-mod-passenger
</code></pre>

<p>Make sure the Passenger Apache module; it maybe enabled already:</p>

<pre><code>sudo a2enmod passenger
</code></pre>

<p>Restart Apache:</p>

<pre><code>sudo service apache2 restart
</code></pre>

<p>Giờ là lúc setup server apache. Hiện tại thì bắt buộc phải copy source code vào trong thư mục <code>/var/www</code>, khá là bất tiện.</p>

<pre><code>$ sudo vim /etc/apache2/sites-available/sample-chat.local.conf
</code></pre>

<p>Sau đó chèn code sau</p>

<pre><code>&lt;virtualhost *:80&gt;
    DocumentRoot "/var/www/sample-chat/public"
    ServerName sample-chat.local
    SetEnv RACK_ENV development

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
    &lt;Directory "/var/www/sample-chat/public"&gt;
      Options FollowSymLinks
      Require all granted
    &lt;/directory&gt;

&lt;/virtualhost&gt;
</code></pre>

<p>Say đó sửa file <code>/etc/hosts</code> để thiết lập domain ảo ở local.</p>

<p>Chạy lệnh</p>

<pre><code>$ sudo a2ensite sample-chat.local
$ sudo service apache2 reload
$ sudo service apache2 restart
</code></pre>

<p>Vào trong thư mục source code chạy lệnh <code>rake secret</code>sau đó copy đoạn mã vào trong file <code>config/secret.yml</code></p>

<p>Sửa config trong file <code>config/initializers/websocket_rails.rb</code> về <code>config.standalone = true</code>. Sau đó chạy lệnh:</p>

<pre><code>$ rake websocket_rails:start_server
$ rake assets:precompile
</code></pre>

<p>Vậy là đã hoàn tất!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/09/vim-tips/">Vim Tips</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-09T13:38:21+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:38 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Move left, up, down, right</h3>

<pre><code>Move left : [h]
Move up   : [j]
Move down : [k]
Move right: [l]
</code></pre>

<h3>Move word at a time</h3>

<pre><code>[w]  moves to the start of next word;
[e]  moves to the end of next word;
[b]  moves to beginning of the word;
</code></pre>

<h3>Virtual mode</h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/08/rails-tutorial-step-by-step/">Rails Tutorial - Step by Step</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-08T10:49:19+09:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>8</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:49 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Init project</h2>

<h3>Create project</h3>

<pre><code>$ rails new project-name -d mysql
$ cd project-name
$ bundle install
$ bundle update
</code></pre>

<h3>Init bitbucket and heroku</h3>

<pre><code>$ git init
$ git remote add origin git@bitbucket.org:&lt;username&gt;/&lt;project-name&gt;

$ heroku create
$ heroku apps:rename &lt;new-name&gt;
</code></pre>

<h3>Config heroku</h3>

<h4>Gemfile</h4>

<pre><code>group :production do
  gem 'puma'
  gem 'pg',             '0.17.1'
  gem 'rails_12factor', '0.0.2'
end
</code></pre>

<h4>Puma config</h4>

<p>Create <code>Procfile</code></p>

<pre><code>web: bundle exec puma -C config/puma.rb
</code></pre>

<p>Create a configuration file for Puma at <code>config/puma.rb</code></p>

<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)
threads_count = Integer(ENV['MAX_THREADS'] || 5)
threads threads_count, threads_count

preload_app!

rackup      DefaultRackup
port        ENV['PORT']     || 3000
environment ENV['RACK_ENV'] || 'development'

on_worker_boot do
  ActiveRecord::Base.establish_connection
end
</code></pre>

<p>Run command</p>

<pre><code>$ heroku config:set MIN_THREADS=1 MAX_THREADS=1
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/31/android-retrofit/">Android - Retrofit, OkHttp and GSON</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-31T10:46:30+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>10:46 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Overview</h3>

<p>Retrofit is a type-safe REST client for Android built by Square. The library provides a powerful framework for authenticating and interacting with APIs and sending network requests with OkHttp.</p>

<p>This library makes downloading JSON or XML data from a web API fairly straightforward. Once the data is downloaded then it is parsed into a Plain Old Java Object (POJO) which must be defined for each &ldquo;resource&rdquo; in the response.</p>

<h3>Setup</h3>

<p>Make sure to require Internet permissions in your <code>AndroidManifest.xml</code> file:</p>

<pre><code>&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
    .
    .
    .
&lt;/manifest&gt;
</code></pre>

<p>Add the following to your <code>app/build.gradle</code> file:</p>

<pre><code>dependencies {
  compile 'com.squareup.okhttp:okhttp:2.4.0'
  compile 'com.squareup.retrofit:retrofit:1.9.0'
  compile 'com.google.code.gson:gson:2.3'
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/22/note-something-when-work-about-rails-and-gmail/">Note Something When Work About Rails and Gmail</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-22T10:49:06+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>10:49 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>To enable smtp for gmail account via rails</h3>

<p>Cần phải bật chế độ less secure</p>

<pre><code>https://www.google.com/settings/u/1/security/lesssecureapps
</code></pre>

<h3>List files to config</h3>

<pre><code>/config/environments/development.rb
#Chú ý line này, cần phải chính xác
config.action_mailer.default_url_options = { :host =&gt; '192.168.1.214:3000' }

/config/secrets.yml
# Chú ý line này, có lẽ phải giống với tên đăng ký gmail
admin_name: "Link works Japan"
</code></pre>

<h3>Edit Gemfile</h3>

<p>Thêm gem <code>pg</code> vào production khi deploy lên heroku</p>

<h3>Tìm hiểu về gem pundit</h3>

<h3>Tìm hiểu về gem upmin-admin</h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/21/note-something-about-android-studio/">Note Something About Android Studio</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-21T21:22:08+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>9:22 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Create project with Google Plus login</h3>

<p>Cần phải sửa lại phiên bản của <code>play-services</code> trong file <code>build.gradle</code></p>

<pre><code>compile 'com.google.android.gms:play-services:6.1.71'
</code></pre>

<h3>Thao tác để enable Google Plus API</h3>

<ol>
<li><p>Go to the Google Developers Console</p></li>
<li><p>Click Create Project:</p>

<ul>
<li>In the Project name field, type in a name for your project, such as Quickstart App.</li>
<li>In the Project ID field, optionally type in a project ID for your project or use the one that the console has created for you. This ID must be unique world-wide.</li>
</ul>
</li>
<li><p>Click the Create button and wait for the project to be created. Note: There may be short delay of up to 30 seconds before the project is created. Once the project is created, the name you gave it appears at the top of the left sidebar.</p>

<ul>
<li>In the left sidebar, select APIs &amp; auth (the APIs sub-item is automatically selected).</li>
<li>Find the Google+ API and set its status to ON—notice that this action moves Google+ API to the top of the list; you can scroll up to see it.</li>
<li>In the sidebar under &ldquo;APIs &amp; auth&rdquo;, select Consent screen.</li>
<li>Choose an Email Address and specify a Product Name.</li>
<li>In the left sidebar under &ldquo;APIs &amp; auth&rdquo;, select Credentials.</li>
<li>Click Create a new Client ID—the Create Client ID dialog box appears, as shown further below.</li>
<li>Select Installed application for the application type.</li>
<li>Select Android as the installed application type.</li>
<li>Copy and paste the following package name for this quick-start app into the Package name field:
      com.google.android.gms.plus.sample.quickstart</li>
<li>In a terminal, run the the Keytool utility to get the SHA-1 fingerprint of the certificate. For the debug.keystore, the password is android.
      keytool -exportcert -alias androiddebugkey -keystore <path-to-debug-or-production-keystore> -list -v</li>
</ul>
</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/20/building-a-restful-api-in-a-rails-application/">Building a RESTful API in a Rails Application</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-20T13:02:29+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:02 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Auto setup</h3>

<pre><code>rails new PROJECT -m https://raw.github.com/RailsApps/rails-composer/master/composer.rb
</code></pre>

<p>PROJECT is name</p>

<h3>Devise</h3>

<p>Devise is a flexible authentication solution for Rails based on Warden. It:</p>

<ul>
<li>Is Rack based;</li>
<li>Is a complete MVC solution based on Rails engines;</li>
<li>Allows you to have multiple models signed in at the same time;</li>
<li>Is based on a modularity concept: use only what you really need.</li>
</ul>


<p>It&rsquo;s composed of 10 modules:</p>

<ul>
<li><code>Database Authenticatable</code> encrypts and stores a password in the database to validate the authenticity of a user while signing in. The authentication can be done both through POST requests or HTTP Basic Authentication.</li>
<li><code>Omniauthable</code> adds OmniAuth (<a href="https://github.com/intridea/omniauth">https://github.com/intridea/omniauth</a>) support.</li>
<li><code>Confirmable</code> sends emails with confirmation instructions and verifies whether an account is already confirmed during sign in.</li>
<li><code>Recoverable</code> resets the user password and sends reset instructions.</li>
<li><code>Registerable</code> handles signing up users through a registration process, also allowing them to edit and destroy their account.</li>
<li><code>Rememberable</code> manages generating and clearing a token for remembering the user from a saved cookie.</li>
<li><code>Trackable</code> tracks sign in count, timestamps and IP address.</li>
<li><code>Timeoutable</code> expires sessions that have not been active in a specified period of time.</li>
<li><code>Validatable</code> provides validations of email and password. It&rsquo;s optional and can be customized, so you&rsquo;re able to define your own validations.</li>
<li><code>Lockable</code> locks an account after a specified number of failed sign-in attempts. Can unlock via email or after a specified time period.</li>
</ul>


<h5>Getting started</h5>

<pre><code>gem 'devise'

rails generate devise:install

rails generate devise MODEL
</code></pre>

<p>Replace MODEL with the class name used for the application’s users (it’s frequently User but could also be Admin).</p>

<p>This will create a model (if one does not exist) and configure it with default Devise modules. The generator also configures your config/routes.rb file to point to the Devise controller.</p>

<p>Next, check the MODEL for any additional configuration options you might want to add, such as confirmable or lockable. If you add an option, be sure to inspect the migration file (created by the generator if your ORM supports them) and uncomment the appropriate section. For example, if you add the confirmable option in the model, you&rsquo;ll need to uncomment the Confirmable section in the migration.</p>

<p>Then run:</p>

<pre><code>rake db:migrate
</code></pre>

<p>Next, you need to set up the default URL options for the Devise mailer in each environment.</p>

<p>Here is a possible configuration for config/environments/development.rb:</p>

<pre><code>config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - ダン・クァン・ミン -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
