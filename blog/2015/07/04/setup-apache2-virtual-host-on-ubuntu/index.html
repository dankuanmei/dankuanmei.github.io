
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Setup Apache2 Virtual Host on Ubuntu - ダン・クァン・ミン Blog</title>
  <meta name="author" content="ダン・クァン・ミン">

  
  <meta name="description" content="Create the Directory Structure The first step that we are going to take is to make a directory structure that will hold the site data that we will be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dankuanmei.github.io/blog/2015/07/04/setup-apache2-virtual-host-on-ubuntu/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ダン・クァン・ミン Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ダン・クァン・ミン Blog</a></h1>
  
    <h2>はじめまして</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="dankuanmei.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Setup Apache2 Virtual Host on Ubuntu</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-04T13:20:58+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:20 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Create the Directory Structure</h2>

<p>The first step that we are going to take is to make a directory structure that will hold the site data that we will be serving to visitors.</p>

<pre><code>sudo mkdir -p /var/www/example.local/public_html
</code></pre>

<h2>Grant Permissions</h2>

<p>Now we have the directory structure for our files, but they are owned by our root user. If we want our regular user to be able to modify files in our web directories, we can change the ownership by doing this:</p>

<pre><code>sudo chown -R $USER:$USER /var/www/example.local/public_html
</code></pre>

<p>We should also modify our permissions a little bit to ensure that read access is permitted to the general web directory and all of the files and folders it contains so that pages can be served correctly:</p>

<pre><code>sudo chmod -R 755 /var/www
</code></pre>

<h2>Create Demo Pages for Each Virtual Host</h2>

<pre><code>vim /var/www/example.local/public_html/index.html
</code></pre>

<p>In this file, create a simple HTML document that indicates the site it is connected to. My file looks</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Welcome to example.local!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Success!  The example.local virtual host is working!&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h2>Enable mod rewrite(Optional)</h2>

<pre><code>sudo a2enmod rewrite
sudo service apache2 restart
</code></pre>

<h2>Create New Virtual Host Files</h2>

<p>Create the First Virtual Host File</p>

<pre><code>sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/example.local.conf
</code></pre>

<p>Open and Edit the file.</p>

<pre><code>sudo vim /etc/apache2/sites-available/example.local.conf
</code></pre>

<p>Sample</p>

<pre><code>&lt;VirtualHost *:80&gt;
    ServerAdmin admin@example.local
    ServerName example.local
    ServerAlias www.example.local
    DocumentRoot /var/www/example.local/public_html
    &lt;Directory /var/www/example.local/public_html&gt;
      AllowOverride all
    &lt;/Directory&gt;
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>

<p>Save and close the file.</p>

<h2>Enable the New Virtual Host Files</h2>

<p>We can use the a2ensite tool to enable each of our sites like this:</p>

<pre><code>sudo a2ensite example.local.conf
</code></pre>

<p>When you are finished, you need to restart Apache to make these changes take effect:</p>

<pre><code>sudo service apache2 restart
</code></pre>

<h2>Set Up Local Hosts File (Optional)</h2>

<p>If you haven&rsquo;t been using actual domain names that you own to test this procedure and have been using some example domains instead, you can at least test the functionality of this process by temporarily modifying the hosts file on your local computer.
If you are on a Mac or Linux computer, edit your local file with administrative privileges by typing:</p>

<pre><code>sudo vim /etc/hosts
</code></pre>

<p>For the domains that I used in this guide, assuming that my VPS IP address is 111.111.111.111, I could add the following lines to the bottom of my hosts file:</p>

<pre><code>127.0.0.1   localhost
127.0.1.1   guest-desktop
111.111.111.111 example.local
</code></pre>

<h2>Test your Results</h2>

<p>Now that you have your virtual hosts configured, you can test your setup easily by going to the domains that you configured in your web browser:
<a href="http://example.local">http://example.local</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">ダン・クァン・ミン</span></span>

      




<time class='entry-date' datetime='2015-07-04T13:20:58+09:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:20 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/apache2/'>apache2</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>, <a class='category' href='/blog/categories/virtualhost/'>virtualhost</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://dankuanmei.github.io/blog/2015/07/04/setup-apache2-virtual-host-on-ubuntu/" data-via="" data-counturl="http://dankuanmei.github.io/blog/2015/07/04/setup-apache2-virtual-host-on-ubuntu/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/07/03/the-presentation-time-stamp/" title="Previous Post: The Presentation Time Stamp">&laquo; The Presentation Time Stamp</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/07/04/setup-cakephp-3-dot-x/" title="Next Post: Setup Cakephp 3.x">Setup Cakephp 3.x &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/09/java-for-beginner/">Java for Beginner</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/09/introduction-to-restful-webservice/">Explore About RESTful Webservice</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/07/javascript-regexp-reference/">JavaScript RegExp Reference</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/07/regular-expression/">Regular Expression</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/06/mysql-tuning-and-optimization/">MySQL Tuning and Optimization</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - ダン・クァン・ミン
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
